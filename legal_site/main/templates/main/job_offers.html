{% extends 'main/base.html' %}
{% load static i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% block content %}


{% for job in jobs %}
<section class="py-4 position-relative">
    <div class="container">
        <div class="about-text p-4 rounded shadow-lg">
        <div class="row g-4">
            <!-- Ліва колонка — опис вакансії -->
            <div class="col-lg-8">

                    {% if LANGUAGE_CODE == 'pl' %}
                        <h3 class="fw-bold mb-3 text-light">
                            <i class="bi bi-briefcase-fill me-2"></i>{{ job.title_pl }}
                        </h3>
                        <p class="mb-2">{{ job.description_pl|truncatewords:40|linebreaks }}</p>
                        {% if job.requirements_pl %}
                            <h6 class="fw-semibold mt-3"><i class="bi bi-list-check me-2"></i>Wymagania:</h6>
                            <p class="mb-2">{{ job.requirements_pl|truncatewords:30|linebreaks }}</p>
                        {% endif %}
                    {% elif LANGUAGE_CODE == 'en' %}
                        <h3 class="fw-bold mb-3 text-light">
                            <i class="bi bi-briefcase-fill me-2"></i>{{ job.title_en }}
                        </h3>
                        <p class="mb-2">{{ job.description_en|truncatewords:40|linebreaks }}</p>
                        {% if job.requirements_en %}
                            <h6 class="fw-semibold mt-3"><i class="bi bi-list-check me-2"></i>Requirements:</h6>
                            <p class="mb-2">{{ job.requirements_en|truncatewords:30|linebreaks }}</p>
                        {% endif %}
                    {% elif LANGUAGE_CODE == 'ru' %}
                        <h3 class="fw-bold mb-3 text-light">
                            <i class="bi bi-briefcase-fill me-2"></i>{{ job.title_ru }}
                        </h3>
                        <p class="mb-2">{{ job.description_ru|truncatewords:40|linebreaks }}</p>
                        {% if job.requirements_ru %}
                            <h6 class="fw-semibold mt-3"><i class="bi bi-list-check me-2"></i>Требования:</h6>
                            <p class="mb-2">{{ job.requirements_ru|truncatewords:30|linebreaks }}</p>
                        {% endif %}
                    {% elif LANGUAGE_CODE == 'uk' %}
                        <h3 class="fw-bold mb-3 text-light">
                            <i class="bi bi-briefcase-fill me-2"></i>{{ job.title_ua }}
                        </h3>
                        <p class="mb-2">{{ job.description_ua|truncatewords:40|linebreaks }}</p>
                        {% if job.requirements_ua %}
                            <h6 class="fw-semibold mt-3"><i class="bi bi-list-check me-2"></i>Вимоги:</h6>
                            <p class="mb-2">{{ job.requirements_ua|truncatewords:30|linebreaks }}</p>
                        {% endif %}
                    {% else %}
                        <h3 class="fw-bold mb-3 text-light">
                            <i class="bi bi-briefcase-fill me-2"></i>{{ job.title_ru }}
                        </h3>
                        <p class="mb-2">{{ job.description_ru|truncatewords:40|linebreaks }}</p>
                        {% if job.requirements_ru %}
                            <h6 class="fw-semibold mt-3"><i class="bi bi-list-check me-2"></i>Требования:</h6>
                            <p class="mb-2">{{ job.requirements_ru|truncatewords:30|linebreaks }}</p>
                        {% endif %}
                    {% endif %}

            </div>

            <!-- Права колонка — деталі -->
            <div class="col-lg-4">
                <div class="p-3 rounded shadow-sm bg-dark border">
                    <p class="mb-2"><i class="bi bi-building me-1 text-light"></i><strong>Firma:</strong> {{ job.company_name }}</p>
                    <p class="mb-2"><i class="bi bi-geo-alt-fill me-1 text-light"></i><strong>Lokalizacja:</strong> {{ job.location }}</p>
                    {% if job.salary_from or job.salary_to %}
                        <p class="mb-2"><i class="bi bi-cash-stack me-1 text-light"></i><strong>Pensja:</strong>
                           {{ job.salary_from|default:"?" }} - {{ job.salary_to|default:"?" }}
                        </p>
                    {% endif %}
                    <p class="mb-3"><i class="bi bi-calendar-event me-1 text-light"></i><em>Dodano: {{ job.published_at|date:"Y-m-d" }}</em></p>

                    <a href="#applyJobModal{{ job.id }}" data-bs-toggle="modal" class="btn btn-primary w-100">
                        <i class="bi bi-envelope-fill me-1"></i>
                        {% if LANGUAGE_CODE == 'pl' %} Aplikuj {% elif LANGUAGE_CODE == 'en' %} Apply
                        {% elif LANGUAGE_CODE == 'ru' %} Откликнуться {% elif LANGUAGE_CODE == 'uk' %} Відгукнутися
                        {% else %} Apply {% endif %}
                    </a>
                </div>
            </div>
        </div>
        </div>
    </div>
</section>
<div class="modal fade" id="applyJobModal{{ job.id }}" tabindex="-1" aria-labelledby="applyJobLabel{{ job.id }}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0 rounded-4 shadow-lg bg-dark-900 text-white">
            <form method="post" action="{% url 'apply_for_job' job.id %}" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Заголовок -->
                <div class="modal-header rounded-top-4 custom-border border-bottom bg-black">
                    <h5 class="modal-title fw-bold" id="applyJobLabel{{ job.id }}">
                        {% if LANGUAGE_CODE == 'pl' %}
                            Aplikuj na stanowisko
                        {% elif LANGUAGE_CODE == 'en' %}
                            Apply for this job
                        {% elif LANGUAGE_CODE == 'es' %}
                            Solicitar este trabajo
                        {% elif LANGUAGE_CODE == 'ru' %}
                            Отклик на вакансию
                        {% elif LANGUAGE_CODE == 'uk' %}
                            Відгук на вакансію
                        {% else %}
                            Apply
                        {% endif %}
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="{% if LANGUAGE_CODE == 'pl' %}Zamknij{% elif LANGUAGE_CODE == 'en' %}Close{% elif LANGUAGE_CODE == 'es' %}Cerrar{% elif LANGUAGE_CODE == 'ru' %}Закрыть{% elif LANGUAGE_CODE == 'uk' %}Закрити{% else %}Close{% endif %}"></button>
                </div>

                <!-- Контент -->
                <div class="modal-body py-4 px-4">
                    <div class="row g-4">

                        <!-- Имя -->
                        <div class="col-md-6">
                            <label for="name{{ job.id }}" class="form-label fw-semibold">
                                {% if LANGUAGE_CODE == 'pl' %}Imię
                                {% elif LANGUAGE_CODE == 'en' %}Name
                                {% elif LANGUAGE_CODE == 'es' %}Nombre
                                {% elif LANGUAGE_CODE == 'ru' %}Имя
                                {% elif LANGUAGE_CODE == 'uk' %}Ім’я
                                {% endif %}
                            </label>
                            <input type="text" class="form-control text-white bg-dark-800" id="name{{ job.id }}" name="name" required>
                        </div>

                        <!-- Email -->
                        <div class="col-md-6">
                            <label for="email{{ job.id }}" class="form-label fw-semibold">
                                {% if LANGUAGE_CODE == 'pl' %}Email
                                {% elif LANGUAGE_CODE == 'en' %}Email
                                {% elif LANGUAGE_CODE == 'es' %}Correo electrónico
                                {% elif LANGUAGE_CODE == 'ru' %}Электронная почта
                                {% elif LANGUAGE_CODE == 'uk' %}Електронна пошта
                                {% endif %}
                            </label>
                            <input type="email" class="form-control text-white bg-dark-800" id="email{{ job.id }}" name="email" required>
                        </div>

                        <!-- Телефон -->
                        <div class="col-md-6">
                            <label for="phone{{ job.id }}" class="form-label fw-semibold">
                                {% if LANGUAGE_CODE == 'pl' %}Telefon
                                {% elif LANGUAGE_CODE == 'en' %}Phone
                                {% elif LANGUAGE_CODE == 'es' %}Teléfono
                                {% elif LANGUAGE_CODE == 'ru' %}Телефон
                                {% elif LANGUAGE_CODE == 'uk' %}Телефон
                                {% endif %}
                            </label>
                            <input type="tel" class="form-control text-white bg-dark-800" id="phone{{ job.id }}" name="phone" required>
                        </div>

                        <!-- Резюме -->
                        <div class="col-md-6">
                            <label for="resume{{ job.id }}" class="form-label fw-semibold">
                                {% if LANGUAGE_CODE == 'pl' %}CV (PDF/DOC)
                                {% elif LANGUAGE_CODE == 'en' %}Resume (PDF/DOC)
                                {% elif LANGUAGE_CODE == 'es' %}Currículum (PDF/DOC)
                                {% elif LANGUAGE_CODE == 'ru' %}Резюме (PDF/DOC)
                                {% elif LANGUAGE_CODE == 'uk' %}Резюме (PDF/DOC)
                                {% endif %}
                            </label>
                            <input type="file" class="form-control text-white bg-dark-800" id="resume{{ job.id }}" name="resume">
                        </div>

                        <!-- Сообщение -->
                        <div class="col-12">
                            <label for="message{{ job.id }}" class="form-label fw-semibold">
                                {% if LANGUAGE_CODE == 'pl' %}Wiadomość
                                {% elif LANGUAGE_CODE == 'en' %}Message
                                {% elif LANGUAGE_CODE == 'es' %}Mensaje
                                {% elif LANGUAGE_CODE == 'ru' %}Сообщение
                                {% elif LANGUAGE_CODE == 'uk' %}Повідомлення
                                {% endif %}
                            </label>
                            <textarea class="form-control text-white bg-dark-800" id="message{{ job.id }}" name="message" rows="4"></textarea>
                        </div>

                    </div>
                </div>

                <!-- Подвал -->
                <div class="modal-footer bg-black border-top custom-border">
                    <button type="button" class="btn custom-gold-outline" data-bs-dismiss="modal">
                        {% if LANGUAGE_CODE == 'pl' %}Anuluj
                        {% elif LANGUAGE_CODE == 'en' %}Cancel
                        {% elif LANGUAGE_CODE == 'es' %}Cancelar
                        {% elif LANGUAGE_CODE == 'ru' %}Отмена
                        {% elif LANGUAGE_CODE == 'uk' %}Скасувати
                        {% endif %}
                    </button>
                    <button type="submit" class="btn custom-gold fw-bold">
                        {% if LANGUAGE_CODE == 'pl' %}Wyślij
                        {% elif LANGUAGE_CODE == 'en' %}Send
                        {% elif LANGUAGE_CODE == 'es' %}Enviar
                        {% elif LANGUAGE_CODE == 'ru' %}Отправить
                        {% elif LANGUAGE_CODE == 'uk' %}Надіслати
                        {% endif %}
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>




{% empty %}
    <p>Brak ofert.</p>
{% endfor %}

{% endblock %}
