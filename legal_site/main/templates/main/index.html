{% extends 'main/base.html' %}
{% block content %}
{% load static i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!-- HERO SECTION -->
<section class="text-center py-5  position-relative"
         style="background-image: url('https://www.theladders.com/wp-content/uploads/sales-meeting-191002.jpg'); background-size: cover;
           background-position: center 7%; /* ниже фокус, видно низ фото */
           background-repeat: no-repeat;
           min-height: 420px;">

  <!-- затемняющий оверлей -->
  <div style="position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.5);"></div>

  <div class="position-relative" style="z-index: 1;">
    <img src="{% static 'main/logo.png' %}"
     class="rounded-circle shadow mb-3"
     alt="Logo"
     style="width: 100px; height: 100px; object-fit: cover;">

    {% if LANGUAGE_CODE == 'pl' %}
      <h1 class="display-5 fw-bold text-white">Visa Project</h1>
      <p class="lead text-light">Prawnik ds. migracji i prawa gospodarczego w Polsce</p>
      <button type="button" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#contactModal">
        Umów się na konsultację
      </button>
    {% elif LANGUAGE_CODE == 'en' %}
      <h1 class="display-5 fw-bold text-white">Visa Project</h1>
      <p class="lead text-light">Immigration and business law attorney in Poland</p>
      <button type="button" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#contactModal">
        Book a consultation
      </button>
    {% elif LANGUAGE_CODE == 'ru' %}
      <h1 class="display-5 fw-bold text-white">Visa Project</h1>
      <p class="lead text-light">Юрист по миграционному и бизнес-праву в Польше</p>
      <button type="button" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#contactModal">
        Записаться на консультацию
      </button>
    {% elif LANGUAGE_CODE == 'uk' %}
      <h1 class="display-5 fw-bold text-white">Visa Project</h1>
      <p class="lead text-light">Юрист з міграційного та бізнес-права в Польщі</p>
      <button type="button" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#contactModal">
        Записатися на консультацію
      </button>
    {% else %}
      <h1 class="display-5 fw-bold text-white">Легалайз Пример</h1>
      <p class="lead text-light">Юрист по миграционному и бизнес-праву в Польше</p>
      <button type="button" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#contactModal">
        Записаться на консультацию
      </button>
    {% endif %}


  </div>
</section>



<!-- ABOUT -->
<!-- ABOUT -->
{% if LANGUAGE_CODE == 'pl' %}
  <section class="container py-5">
    <h2 class="mb-4">O nas</h2>
    <p class="fs-5">
      Świadczymy pomoc prawną w Polsce od 2019 roku. Specjalizujemy się w legalizacji pobytu cudzoziemców, zakładaniu i obsłudze firm, a także w uzyskiwaniu zezwoleń na pracę oraz kart pobytu. Gwarantujemy indywidualne podejście, rzetelność i pełną zgodność z obowiązującym prawem.    </p>
  </section>
{% elif LANGUAGE_CODE == 'en' %}
  <section class="container py-5">
    <h2 class="mb-4">About us</h2>
    <p class="fs-5">
      We have been providing legal assistance in Poland since 2019. Our expertise includes the legalization of foreigners, business registration and support, as well as obtaining work permits and residence cards. We guarantee a personalized approach, accuracy, and full compliance with legal regulations.    </p>
  </section>
{% elif LANGUAGE_CODE == 'ru' %}
  <section class="container py-5">
    <h2 class="mb-4">О нас</h2>
    <p class="fs-5">
      Мы предоставляем юридическую помощь в Польше с 2019 года. Специализируемся на легализации иностранцев, открытии и сопровождении бизнеса, а также получении разрешений на работу и вида на жительство. Гарантируем индивидуальный подход, точность и соблюдение всех правовых норм.    </p>
  </section>
{% elif LANGUAGE_CODE == 'uk' %}
  <section class="container py-5">
    <h2 class="mb-4">Про нас</h2>
    <p class="fs-5">
      Ми надаємо юридичну допомогу в Польщі з 2019 року. Спеціалізуємося на легалізації іноземців, відкритті та супроводі бізнесу, а також отриманні дозволів на роботу та посвідки на проживання. Гарантуємо індивідуальний підхід, точність і дотримання всіх юридичних норм.    </p>
  </section>
{% else %}
  <section class="container py-5">
    <h2 class="mb-4">Обо мне</h2>
    <p class="fs-5">
      Я предоставляю юридическую помощь в Польше с 2019 года. Специализируюсь на легализации иностранцев, открытии и сопровождении бизнеса, а также разрешениях на работу и ВНЖ. Гарантирую персональный подход, точность и соблюдение всех правовых норм.
    </p>
  </section>
{% endif %}


<section class="py-5" style="background-color: white">
  <div class="container">
    <h2 class="mb-5 text-center position-relative d-inline-block" data-aos="fade-up" style="color: black">
      {% trans "Услуги" %}
      <span class="d-block mx-auto mt-2" style="width: 60px; height: 3px; background-color: var(--bs-warning);"></span>
    </h2>

    <div class="row g-4">
      {% for service in services %}
      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
        <div class="card h-100 shadow-lg border-0 bg-dark text-white rounded-4">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-3">
              {% if LANGUAGE_CODE == 'pl' %}
                {{ service.name_pl }}
              {% elif LANGUAGE_CODE == 'en' %}
                {{ service.name_en }}
              {% elif LANGUAGE_CODE == 'ru' %}
                {{ service.name_ru }}
              {% elif LANGUAGE_CODE == 'uk' %}
                {{ service.name_ua }}
              {% else %}
                {{ service.name_en }}
              {% endif %}
            </h5>
            <p class="card-text text-light mb-4">
              {% if LANGUAGE_CODE == 'pl' %}
                {{ service.description_pl }}
              {% elif LANGUAGE_CODE == 'en' %}
                {{ service.description_en }}
              {% elif LANGUAGE_CODE == 'ru' %}
                {{ service.description_ru }}
              {% elif LANGUAGE_CODE == 'uk' %}
                {{ service.description_ua }}
              {% else %}
                {{ service.description_en }}
              {% endif %}
            </p>
            <!-- OPTIONAL: кнопка -->

            <a href="#" class="btn btn-outline-warning mt-auto" data-bs-toggle="modal" data-bs-target="#contactModal">
              {% trans "Записаться" %}
            </a>

          </div>
        </div>
      </div>
      {% empty %}
      <p class="text-center text-white">{% trans "Услуги пока не добавлены." %}</p>
      {% endfor %}
    </div>
  </div>
</section>





<!-- WHY ME -->
{% if LANGUAGE_CODE == 'pl' %}
<section class="container py-5">
  <h2 class="mb-4 text-center" data-aos="fade-up">Dlaczego warto mnie wybrać</h2>
  <div class="row text-center">
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
      <i class="bi bi-award fs-1 text-danger"></i>
      <h5 class="mt-3">Doświadczenie od 2019</h5>
      <p>Ponad 5 lat praktyki prawnej w Polsce</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
      <i class="bi bi-shield-check fs-1 text-danger"></i>
      <h5 class="mt-3">Niezawodność</h5>
      <p>Pracuję na podstawie umowy, udzielam gwarancji</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
      <i class="bi bi-clock-history fs-1 text-danger"></i>
      <h5 class="mt-3">Skuteczność</h5>
      <p>Szybkie składanie wniosków i obsługa</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="400">
      <i class="bi bi-translate fs-1 text-danger"></i>
      <h5 class="mt-3">Rosyjski / Polski</h5>
      <p>Komunikacja bez barier językowych</p>
    </div>
  </div>
</section>

{% elif LANGUAGE_CODE == 'en' %}
<section class="container py-5">
  <h2 class="mb-4 text-center">Why Choose Me</h2>
  <div class="row text-center">
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
      <i class="bi bi-award fs-1 text-primary"></i>
      <h5 class="mt-3">Experience Since 2019</h5>
      <p>Over 5 years of legal practice in Poland</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
      <i class="bi bi-shield-check fs-1 text-success"></i>
      <h5 class="mt-3">Reliability</h5>
      <p>I work under contract and provide guarantees</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
      <i class="bi bi-clock-history fs-1 text-warning"></i>
      <h5 class="mt-3">Efficiency</h5>
      <p>Prompt submission and full support</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="400">
      <i class="bi bi-translate fs-1 text-danger"></i>
      <h5 class="mt-3">Russian / Polish</h5>
      <p>Communication without language barriers</p>
    </div>
  </div>
</section>
{% elif LANGUAGE_CODE == 'uk' %}
<section class="container py-5">
  <h2 class="mb-4 text-center">Чому обирають мене</h2>
  <div class="row text-center">
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
      <i class="bi bi-award fs-1 text-primary"></i>
      <h5 class="mt-3">Досвід з 2019 року</h5>
      <p>Понад 5 років юридичної практики в Польщі</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
      <i class="bi bi-shield-check fs-1 text-success"></i>
      <h5 class="mt-3">Надійність</h5>
      <p>Працюю за договором, надаю гарантії</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
      <i class="bi bi-clock-history fs-1 text-warning"></i>
      <h5 class="mt-3">Ефективність</h5>
      <p>Оперативна подача та супровід</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="400">
      <i class="bi bi-translate fs-1 text-danger"></i>
      <h5 class="mt-3">Російська / Польська</h5>
      <p>Спілкування без мовного бар’єру</p>
    </div>
  </div>
</section>
{% else %}
<section class="container py-5">
  <h2 class="mb-4 text-center">Почему выбирают меня</h2>
  <div class="row text-center">
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
      <i class="bi bi-award fs-1 text-danger"></i>
      <h5 class="mt-3">Опыт с 2019</h5>
      <p>Более 5 лет юридической практики в Польше</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
      <i class="bi bi-shield-check fs-1 text-danger"></i>
      <h5 class="mt-3">Надёжность</h5>
      <p>Работаю по договору, предоставляю гарантии</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
      <i  class="bi bi-clock-history fs-1 text-danger"></i>
      <h5 class="mt-3">Эффективность</h5>
      <p>Оперативная подача и сопровождение</p>
    </div>
    <div class="col-md-3" data-aos="fade-up" data-aos-delay="400">
      <i class="bi bi-translate fs-1 text-danger"></i>
      <h5 class="mt-3">Русский / Польский</h5>
      <p>Общение без языкового барьера</p>
    </div>
  </div>
</section>
{% endif %}

<!-- Swiper контейнер -->
<div class="swiper teamSwiper container py-5">
  <div class="swiper-wrapper">

    {% for employee in employees %}
    <div class="swiper-slide">
      <div class="card border-0 h-100 shadow-lg card-hover"
           data-bs-toggle="modal"
           data-bs-target="#employeeModal"
           data-photo="{{ employee.photo.url }}"
           data-name="{{ employee.first_name }} {{ employee.last_name }}"
           data-position="{{ employee.position }}"
           data-age="{{ employee.age }}"
           data-profession="{{ employee.profession }}"
           data-years="{{ employee.years_in_poland }}"
           data-description="{{ employee.description }}">
        <div class="bg-dark rounded-top overflow-hidden" style="height: 250px;">
          <img src="{{ employee.photo.url }}" class="card-img-top" alt="{{ employee.first_name }}">
        </div>
        <div class="card-body text-center">
          <h5 class="card-title">{{ employee.first_name }} <strong>{{ employee.last_name }}</strong></h5>
          <p class="text-muted">{{ employee.position }}</p>
          <hr>
          <p class="mb-1"><strong>Age:</strong> {{ employee.age }} years old</p>
          <p class="mb-1"><strong>Profession:</strong> {{ employee.profession }}</p>
          <p class="mb-1"><strong>Residence in Poland:</strong> {{ employee.years_in_poland }} years</p>
        </div>
      </div>
    </div>

    {% endfor %}

  </div>

  <!-- Кнопки навігації -->
  <div class="swiper-button-next" style="color: var(--color-text-gold);"></div>
  <div class="swiper-button-prev" style="color: var(--color-text-gold);"></div>
</div>



<!-- CONTACT -->
<!-- CONTACT + MAP -->
<section class="py-5" style="background-color: var(--color-bg); color: var(--color-white);">
  <div class="container">
    <h2 class="text-center mb-5" data-aos="fade-up">{% trans "Контакты" %}</h2>

    <div class="row g-4 align-items-stretch">

      <!-- Контактные карточки -->
      <div class="col-lg-6">
        <div class="row g-4">
          <div class="col-12" data-aos="fade-right">
            <div class="d-flex align-items-start p-4 border-start border-4 border-warning bg-dark rounded shadow h-100">
              <i class="bi bi-geo-alt-fill fs-3 text-warning me-3"></i>
              <div>
                <h5 class="mb-1">{{company.miasto}}</h5>
                <p class="mb-0">{{company.adres}}</p>
              </div>
            </div>
          </div>

          <div class="col-12" data-aos="fade-up">
            <div class="d-flex align-items-start p-4 border-start border-4 border-warning bg-dark rounded shadow h-100">
              <i class="bi bi-telephone-fill fs-3 text-warning me-3"></i>
              <div>
                <h5 class="mb-1">{{company.telefon_legalizacja}}</h5>
                <p class="mb-0">{% trans "Телефон" %}</p>
              </div>
            </div>
          </div>

          <div class="col-12" data-aos="fade-left">
            <div class="d-flex align-items-start p-4 border-start border-4 border-warning bg-dark rounded shadow h-100">
              <i class="bi bi-envelope-fill fs-3 text-warning me-3"></i>
              <div>
                <h5 class="mb-1">{{company.email}}</h5>
                <p class="mb-0">{% trans "Email" %}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Карта -->
      <div class="col-lg-6" data-aos="zoom-in">
        <div class="ratio ratio-4x3 shadow rounded overflow-hidden h-100">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2442.5451878311937!2d17.022081815739315!3d51.11831737957124!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x470fe9c062eb6e8f%3A0x204cd554169bdb71!2sPlac%20Solidarno%C5%9Bci%201%2C%2051-516%20Wroc%C5%82aw%2C%20Poland!5e0!3m2!1sen!2spl!4v1655193872665!5m2!1sen!2spl"
            style="border:0;" allowfullscreen="" loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- Модальне вікно -->
<div class="modal fade" id="employeeModal" tabindex="-1" aria-labelledby="employeeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content bg-white text-dark">
      <div class="modal-header">
        <h5 class="modal-title" id="employeeModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
      </div>
      <div class="modal-body">
        <div class="row g-4">
          <div class="col-md-5">
            <img id="modalPhoto" src="" alt="" class="img-fluid rounded shadow">
          </div>
          <div class="col-md-7">
            <p><strong>Position:</strong> <span id="modalPosition"></span></p>
            <p><strong>Age:</strong> <span id="modalAge"></span></p>
            <p><strong>Profession:</strong> <span id="modalProfession"></span></p>
            <p><strong>Residence in Poland:</strong> <span id="modalYears"></span></p>
            <hr>
            <p id="modalDescription" class="mt-3"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0 rounded-4 shadow-lg bg-dark-900 text-white">
      <form method="post" action="{% url 'contact' %}">
        {% csrf_token %}

        <!-- Заголовок -->
        <div class="modal-header rounded-top-4 custom-border border-bottom bg-black">
          <h5 class="modal-title" id="contactModalLabel">
            {% if LANGUAGE_CODE == 'pl' %}
              Umów się na konsultację
            {% elif LANGUAGE_CODE == 'en' %}
              Book a Consultation
            {% elif LANGUAGE_CODE == 'ru' %}
              Запись на консультацию
            {% elif LANGUAGE_CODE == 'uk' %}
              Запис на консультацію
            {% else %}
              Запись на консультацию
            {% endif %}
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
            aria-label="{% if LANGUAGE_CODE == 'pl' %}Zamknij{% elif LANGUAGE_CODE == 'en' %}Close{% elif LANGUAGE_CODE == 'ru' %}Закрыть{% elif LANGUAGE_CODE == 'uk' %}Закрити{% else %}Закрыть{% endif %}">
          </button>
        </div>

        <!-- Контент -->
        <div class="modal-body py-4 px-4">
          <div class="row g-4">
            <div class="col-md-6">
              <label for="name" class="form-label">{% trans "Имя" %}</label>
              <input type="text" class="form-control text-white bg-dark-800 custom-border" id="name" name="name" required>
            </div>

            <div class="col-md-6">
              <label for="phone" class="form-label">{% trans "Телефон" %}</label>
              <input type="tel" class="form-control text-white bg-dark-800 custom-border" id="phone" name="phone"
                required pattern="\+?[0-9\s\-]{7,15}" placeholder="+48 XXX XXX XXX">
            </div>

            <div class="col-md-6">
              <label for="email" class="form-label">{% trans "Электронная почта" %}</label>
              <input type="email" class="form-control text-white bg-dark-800 custom-border" id="email" name="email" required>
            </div>

            <div class="col-md-6">
              <label for="service" class="form-label">{% trans "Выберите услугу" %}</label>
              <select class="form-select text-white bg-dark-800 custom-border" id="service" name="service" required>
                <option value="" disabled selected>{% trans "Выберите услугу" %}</option>
                {% for service in services %}
                <option value="{{ service.id }}">
                  {% if LANGUAGE_CODE == 'pl' %}
                    {{ service.name_pl }}
                  {% elif LANGUAGE_CODE == 'en' %}
                    {{ service.name_en }}
                  {% elif LANGUAGE_CODE == 'ru' %}
                    {{ service.name_ru }}
                  {% elif LANGUAGE_CODE == 'uk' %}
                    {{ service.name_uk }}
                  {% else %}
                    {{ service.name }}
                  {% endif %}
                </option>
                {% endfor %}
              </select>
            </div>

            <div class="col-12">
              <label for="message" class="form-label">{% trans "Сообщение" %}</label>
              <textarea class="form-control text-white bg-dark-800 custom-border" id="message" name="message"
                rows="4" placeholder="..." style="resize: none;"></textarea>
            </div>
          </div>
        </div>

        <!-- Подвал -->
        <div class="modal-footer rounded-bottom-4 border-top custom-border bg-black">
          <button type="button" class="btn custom-gold-outline" data-bs-dismiss="modal">
            {% trans "Отмена" %}
          </button>
          <button type="submit" class="btn custom-gold fw-bold">
            {% trans "Отправить" %}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  var swiper = new Swiper(".teamSwiper", {
    slidesPerView: 1,
    spaceBetween: 30,
    loop: true,
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    breakpoints: {
      576: {
        slidesPerView: 1,
      },
      768: {
        slidesPerView: 2,
      },
      992: {
        slidesPerView: 3,
      },
      1200: {
        slidesPerView: 4,
      },
    },
  });
</script>

<script>
  const employeeModal = document.getElementById('employeeModal');
  employeeModal.addEventListener('show.bs.modal', function (event) {
    const card = event.relatedTarget;

    document.getElementById('employeeModalLabel').textContent = card.getAttribute('data-name');
    document.getElementById('modalPhoto').src = card.getAttribute('data-photo');
    document.getElementById('modalPosition').textContent = card.getAttribute('data-position');
    document.getElementById('modalAge').textContent = card.getAttribute('data-age') + ' years old';
    document.getElementById('modalProfession').textContent = card.getAttribute('data-profession');
    document.getElementById('modalYears').textContent = card.getAttribute('data-years') + ' years';
    document.getElementById('modalDescription').textContent = card.getAttribute('data-description');
  });
</script>

{% endblock %}
